<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Return Confirmation - LibraryPNC</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.7.0/fonts/remixicon.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/static/css/return_result.css">
</head>

<body>
    <main>
        <div class="confirmation-container">
            <div class="confirmation-card">
                <div class="confirmation-header">
                    <div class="confirmation-icon">
                        <i class="ri-checkbox-circle-line"></i>
                    </div>
                    <h1>Book Returned Successfully!</h1>
                    <p>Thank you, {{ user_name }}. The book has been successfully returned to the library.</p>
                </div>

                <div class="book-info">
                    <div class="book-title">{{ book.title }}</div>
                    <div class="book-details">
                        <div class="detail-item">
                            <div class="detail-label">
                                <i class="ri-user-line"></i>
                                Author
                            </div>
                            <div class="detail-value">{{ book.author }}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">
                                <i class="ri-bookmark-line"></i>
                                Category
                            </div>
                            <div class="detail-value">{{ book.category }}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">
                                <i class="ri-calendar-event-line"></i>
                                Borrow Date
                            </div>
                            <div class="detail-value">{{ book.borrow_date }}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">
                                <i class="ri-calendar-check-line"></i>
                                Return Date
                            </div>
                            <div class="detail-value">{{ book.return_date }}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">
                                <i class="ri-information-line"></i>
                                Status
                            </div>
                            <div class="detail-value">
                                <span class="status-badge">Returned</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="additional-info">
                    <i class="ri-information-line"></i>
                    <div class="additional-text">
                        This book is now available for other library members to borrow.
                    </div>
                </div>

                <div class="buttons">
                    <a href="{{ url_for('borrowed_books') }}" class="btn btn-primary">
                        <i class="ri-book-line"></i> My Borrowed Books
                    </a>
                    <a href="{{ url_for('dashboard') }}" class="btn btn-success">
                        <i class="ri-dashboard-line"></i> Back to Dashboard
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Enhanced JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add confetti effect for celebration
            function createConfetti() {
                const colors = ['#4361ee', '#4cc9f0', '#f72585', '#f39c12'];
                const confettiCount = 50;
                
                for (let i = 0; i < confettiCount; i++) {
                    const confetti = document.createElement('div');
                    confetti.style.cssText = `
                        position: fixed;
                        width: 10px;
                        height: 10px;
                        background: ${colors[Math.floor(Math.random() * colors.length)]};
                        top: -10px;
                        left: ${Math.random() * 100}vw;
                        border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
                        animation: fall ${Math.random() * 3 + 2}s linear forwards;
                        z-index: 1000;
                    `;
                    
                    document.body.appendChild(confetti);
                    
                    // Remove confetti after animation
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }
                
                // Add keyframes for animation
                if (!document.getElementById('confetti-animation')) {
                    const style = document.createElement('style');
                    style.id = 'confetti-animation';
                    style.textContent = `
                        @keyframes fall {
                            to {
                                transform: translateY(100vh) rotate(${Math.random() * 360}deg);
                                opacity: 0;
                            }
                        }
                    `;
                    document.head.appendChild(style);
                }
            }
            
            // Trigger confetti on page load
            setTimeout(createConfetti, 500);
            
            // Add success sound effect (commented out as it requires user interaction)
            /*
            function playSuccessSound() {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.type = 'sine';
                oscillator.frequency.value = 523.25; // C5
                gainNode.gain.value = 0.1;
                
                oscillator.start();
                
                // Create a simple melody
                setTimeout(() => {
                    oscillator.frequency.value = 659.25; // E5
                }, 100);
                
                setTimeout(() => {
                    oscillator.frequency.value = 783.99; // G5
                }, 200);
                
                setTimeout(() => {
                    gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.5);
                    oscillator.stop(audioContext.currentTime + 0.5);
                }, 300);
            }
            
            // Play sound after user interaction
            document.addEventListener('click', function() {
                playSuccessSound();
                document.removeEventListener('click', arguments.callee);
            });
            */
            
            // Add auto-redirect after 10 seconds
            setTimeout(() => {
                // Show redirect notification
                const redirectNotification = document.createElement('div');
                redirectNotification.innerHTML = `
                    <div style="
                        position: fixed;
                        bottom: 20px;
                        left: 50%;
                        transform: translateX(-50%);
                        background: rgba(0,0,0,0.8);
                        color: white;
                        padding: 12px 20px;
                        border-radius: 10px;
                        font-size: 14px;
                        z-index: 1000;
                        animation: fadeInUp 0.5s ease;
                    ">
                        Redirecting to dashboard in <span id="countdown">5</span> seconds...
                    </div>
                `;
                
                document.body.appendChild(redirectNotification);
                
                // Countdown
                let countdown = 5;
                const countdownElement = document.getElementById('countdown');
                const countdownInterval = setInterval(() => {
                    countdown--;
                    countdownElement.textContent = countdown;
                    
                    if (countdown <= 0) {
                        clearInterval(countdownInterval);
                        window.location.href = "{{ url_for('dashboard') }}";
                    }
                }, 1000);
            }, 5000);
        });
    </script>
</body>

</html>