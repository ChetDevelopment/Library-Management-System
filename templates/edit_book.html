<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Edit Book - LibraryPNC</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/edit_books.css">
</head>

<body>
    <div class="form-container">
        <div class="form-card">
            {% if book %}
            <div class="header">
                <div class="header-icon">
                    <i class="fas fa-edit"></i>
                </div>
                <h2>Edit Book</h2>
                <p class="subtitle">Update book information in the library</p>
                <div class="book-id">Book ID: #{{ book.id }}</div>
            </div>

            <form method="POST">
                <div class="form-group">
                    <label for="title" class="required">Book Title</label>
                    <div class="input-with-icon">
                        <i class="fas fa-book"></i>
                        <input type="text" name="title" id="title" value="{{ book.title }}" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="author" class="required">Author</label>
                    <div class="input-with-icon">
                        <i class="fas fa-user-edit"></i>
                        <input type="text" name="author" id="author" value="{{ book.author }}" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="category">Category</label>
                    <div class="input-with-icon">
                        <i class="fas fa-folder"></i>
                        <input type="text" name="category" id="category" value="{{ book.category or '' }}"
                            placeholder="e.g., Fiction, Science, History">
                    </div>
                </div>

                <div class="form-group">
                    <label for="isbn">ISBN</label>
                    <div class="input-with-icon">
                        <i class="fas fa-barcode"></i>
                        <input type="text" name="isbn" id="isbn" value="{{ book.isbn or '' }}"
                            placeholder="International Standard Book Number">
                    </div>
                </div>

                <div class="form-group">
                    <label for="status">Status</label>
                    <div class="input-with-icon">
                        <i class="fas fa-info-circle"></i>
                        <select name="status" id="status">
                            <option value="available" {% if book.status=='available' %}selected{% endif %}>Available
                            </option>
                            <option value="issued" {% if book.status=='issued' %}selected{% endif %}>Issued</option>
                            <option value="reserved">Reserved</option>
                            <option value="maintenance">Under Maintenance</option>
                        </select>
                    </div>
                    <div class="mt-2">
                        {% if book.status == 'available' %}
                        <span class="status-indicator status-available">
                            <i class="fas fa-check-circle"></i> Currently Available
                        </span>
                        {% elif book.status == 'issued' %}
                        <span class="status-indicator status-issued">
                            <i class="fas fa-times-circle"></i> Currently Issued
                        </span>
                        {% endif %}
                    </div>
                </div>

                <div class="btn-group">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                    <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">
                        <i class="fas fa-times-circle"></i> Cancel
                    </a>
                </div>
            </form>

            <div class="form-footer">
                <p>All required fields are marked with <span style="color: var(--danger);">*</span></p>
            </div>
            {% else %}
            <div class="error-container">
                <div class="error-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h4>Book Not Found</h4>
                <p>The book you're trying to edit doesn't exist or has been removed.</p>
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Back to Dashboard
                </a>
            </div>
            {% endif %}
        </div>
    </div>

    <script>
        // Add some interactive features
        document.addEventListener('DOMContentLoaded', function () {
            // Form validation
            const form = document.querySelector('form');
            if (form) {
                form.addEventListener('submit', function (e) {
                    const title = document.getElementById('title');
                    const author = document.getElementById('author');

                    if (!title.value.trim() || !author.value.trim()) {
                        e.preventDefault();
                        alert('Please fill in all required fields.');
                        return false;
                    }

                    // Show loading state
                    const submitBtn = form.querySelector('button[type="submit"]');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Saving...';
                    submitBtn.disabled = true;

                    // In a real app, the form would submit here
                    // For demo, we'll revert after a delay
                    setTimeout(() => {
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                    }, 2000);
                });
            }

            // Add character counter for inputs
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach(input => {
                input.addEventListener('input', function () {
                    // You could add character limits here if needed
                });
            });

            // Status change effect
            const statusSelect = document.getElementById('status');
            if (statusSelect) {
                statusSelect.addEventListener('change', function () {
                    const statusIndicator = document.querySelector('.status-indicator');
                    if (statusIndicator) {
                        statusIndicator.style.opacity = '0.5';
                        setTimeout(() => {
                            statusIndicator.style.opacity = '1';
                        }, 300);
                    }
                });
            }
        });
    </script>
</body>

</html>